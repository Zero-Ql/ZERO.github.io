function u(t){if(!t.classList.contains("active-current")){document.querySelectorAll(".post-toc .active").forEach(e=>{e.classList.remove("active","active-current")}),t.classList.add("active","active-current");let e=t.parentNode;for(;!e.matches(".post-toc");)e.matches("li")&&e.classList.add("active"),e=e.parentNode}}function f(){let i=document.querySelectorAll(".post-toc li");if(i.length){let r=[...i].map(e=>{let t=e.querySelector(".toc-link"),c=document.getElementById(decodeURI(t.getAttribute("href")).replace("#",""));return t.addEventListener("click",e=>{e.preventDefault(),window.scrollTo(0,c.offsetTop+1)}),c});!function n(o){o=Math.floor(o+1e4);let t=new IntersectionObserver((e,t)=>{var c=document.documentElement.scrollHeight+100;o<c?(t.disconnect(),n(c)):(t=function(e){let t=0,c=e[t];if(0<c.boundingClientRect.top)return 0===(t=r.indexOf(c.target))?0:t-1;for(;t<e.length;t++){if(!(e[t].boundingClientRect.top<=0))return r.indexOf(c.target);c=e[t]}return r.indexOf(c.target)}(e),u(i[t]))},{rootMargin:o+"px 0px -100% 0px",threshold:0});r.forEach(e=>{e&&t.observe(e)})}(document.documentElement.scrollHeight)}}function d(){let n="sidebar-nav-active",t="sidebar-panel-active";{let t=document.querySelector(".sidebar-nav-toc"),c="ri:list-ordered";t&&t.addEventListener("click",()=>{var e;console.log("click"),t.classList.contains(n)&&((e=t.querySelector(".iconify")).dataset.icon=e.dataset.icon===c?"ri:list-unordered":c,document.querySelectorAll(".toc-number").forEach(e=>{e.classList.toggle("hidden")}))})}document.querySelectorAll(".sidebar-nav li").forEach(e=>{e.onclick=function(){this.classList.contains(n)||(document.querySelector("."+t).classList.remove(t),document.querySelector("#"+this.dataset.target).classList.add(t),document.querySelector("."+n).classList.remove(n),this.classList.add(n))}}),f()}document.addEventListener("DOMContentLoaded",d),document.addEventListener("pjax:success",d);